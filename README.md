# 图像增强处理工具 - 模块化版本

一个功能完整的Python图像增强处理程序，采用模块化设计，支持多种图像增强算法，具有直观的图形用户界面。

## 🏗️ 模块化架构

### 项目结构
```
shuzixinhao2/
├── main.py                    # 主程序入口
├── run.py                     # 快速启动脚本
├── requirements.txt           # 依赖库列表
├── install_dependencies.py    # 自动安装脚本
├── create_sample_image.py     # 示例图像生成器
├── README.md                  # 说明文档
├── modules/                   # 图像处理算法模块
│   ├── __init__.py
│   ├── base_processor.py      # 基础图像处理类
│   ├── smooth_filter.py       # 平滑滤波模块
│   ├── sharpen_filter.py      # 锐化滤波模块
│   ├── emboss_filter.py       # 浮雕效果模块
│   ├── edge_detection.py      # 边缘检测模块
│   └── chromatic_aberration.py # 色散效果模块
├── gui/                       # GUI界面模块
│   ├── __init__.py
│   ├── main_window.py         # 主窗口
│   ├── image_display.py       # 图像显示组件
│   └── control_panel.py       # 控制面板
└── utils/                     # 工具函数模块
    ├── __init__.py
    ├── image_utils.py         # 图像工具函数
    └── config.py              # 配置管理
```

## ✨ 功能特性

### 图像增强算法
1. **平滑滤波** - 支持高斯、均值、中值、双边滤波等多种算法
2. **锐化滤波** - 支持反锐化掩模、拉普拉斯、高通、Sobel锐化
3. **浮雕效果** - 支持基础、高浮雕、低浮雕、立体浮雕效果
4. **边缘检测** - 支持Canny、Sobel、Laplacian、Prewitt、Roberts、Scharr
5. **色散效果** - 支持基础、高级、径向、棱镜色散效果

### 界面功能
- 直观的图形用户界面
- 实时参数调节
- 前后对比显示
- 一键保存处理结果
- 支持多种图像格式（JPG、PNG、BMP、TIFF等）
- 模块化设计，便于维护和扩展

## 🔧 技术特点

### 模块化设计优势
- **独立性** - 每个模块功能独立，互不干扰
- **可维护性** - 代码结构清晰，易于修改和扩展
- **可重用性** - 模块可以在其他项目中重复使用
- **可测试性** - 每个模块可以独立测试

### 核心模块说明
- **base_processor.py** - 提供图像加载、保存等基础功能
- **smooth_filter.py** - 实现各种平滑滤波算法
- **sharpen_filter.py** - 实现各种锐化滤波算法
- **emboss_filter.py** - 实现各种浮雕效果算法
- **edge_detection.py** - 实现各种边缘检测算法
- **chromatic_aberration.py** - 实现各种色散效果算法

## 📋 安装要求

### Python版本
- Python 3.7 或更高版本

### 依赖库
所有依赖库均为开源免费软件：

```
opencv-python==4.8.1.78      # 图像处理核心库
Pillow==10.0.1               # Python图像库
numpy==1.24.3                # 数值计算库
matplotlib==3.7.2            # 绘图库
scipy==1.11.2                # 科学计算库
tkinter-tooltip==2.0.0       # GUI工具提示
```

## 🚀 安装步骤

1. **克隆或下载项目**
   ```bash
   # 如果使用git
   git clone <项目地址>
   cd shuzixinhao2
   ```

2. **安装依赖库**
   ```bash
   # 方法一：自动安装
   python install_dependencies.py
   
   # 方法二：手动安装
   pip install -r requirements.txt
   ```

3. **运行程序**
   ```bash
   # 方法一：快速启动
   python run.py
   
   # 方法二：直接运行主程序
   python main.py
   
   # 方法三：创建示例图像
   python main.py --create-sample
   ```

## 📖 使用说明

### 基本操作流程

1. **启动程序**
   - 运行 `python run.py` 或 `python main.py`
   - 程序将打开图形用户界面

2. **加载图像**
   - 点击"选择图像"按钮
   - 选择要处理的图像文件
   - 支持的格式：JPG、JPEG、PNG、BMP、TIFF

3. **选择处理算法**
   - 在控制面板中选择所需的图像增强算法
   - 调整相关参数（如核大小、强度等）

4. **处理图像**
   - 点击"开始处理"按钮
   - 查看处理前后的对比效果

5. **保存结果**
   - 点击"保存图像"按钮
   - 处理后的图像将保存到 `output` 文件夹中

### 算法参数说明

#### 平滑滤波
- **滤波方法**：高斯、均值、中值、双边滤波
- **核大小**：控制平滑程度，数值越大图像越平滑（3-15）

#### 锐化滤波
- **锐化方法**：反锐化掩模、拉普拉斯、高通、Sobel锐化
- **锐化强度**：控制锐化程度，数值越大锐化效果越明显（0.1-3.0）

#### 浮雕效果
- **浮雕方法**：基础、高浮雕、低浮雕、立体浮雕
- **浮雕强度**：控制浮雕程度，数值越大效果越明显（0.1-3.0）

#### 边缘检测
- **检测方法**：Canny、Sobel、Laplacian、Prewitt、Roberts、Scharr
- **阈值参数**：Canny算法的高低阈值设置

#### 色散效果
- **色散方法**：基础、高级、径向、棱镜色散
- **色散强度**：控制色散程度，数值越大效果越明显（1-20）
- **色散方向**：水平、垂直、径向

## 🔧 技术实现

### 模块化架构

#### 图像处理模块
- **base_processor.py** - 提供基础图像操作功能
- **smooth_filter.py** - 实现多种平滑滤波算法
- **sharpen_filter.py** - 实现多种锐化滤波算法
- **emboss_filter.py** - 实现多种浮雕效果算法
- **edge_detection.py** - 实现多种边缘检测算法
- **chromatic_aberration.py** - 实现多种色散效果算法

#### GUI界面模块
- **main_window.py** - 主窗口控制器
- **image_display.py** - 图像显示组件
- **control_panel.py** - 控制面板组件

#### 工具函数模块
- **image_utils.py** - 图像处理工具函数
- **config.py** - 配置管理系统

### 核心算法

1. **平滑滤波**：使用OpenCV的高斯模糊、均值滤波、中值滤波、双边滤波
2. **锐化滤波**：反锐化掩模、拉普拉斯锐化、高通锐化、Sobel锐化
3. **浮雕效果**：多种卷积核实现不同浮雕效果
4. **边缘检测**：Canny、Sobel、Laplacian、Prewitt、Roberts、Scharr算法
5. **色散效果**：RGB通道分离和位移变换

### 界面技术

- **GUI框架**：Tkinter（Python标准库）
- **图像显示**：Matplotlib嵌入Tkinter
- **参数控制**：滑块、下拉框、单选按钮等控件
- **模块化设计**：各组件独立，便于维护和扩展

## 📝 开发指南

### 添加新的图像处理算法

1. 在 `modules/` 目录下创建新的算法模块
2. 继承 `BaseImageProcessor` 类
3. 实现 `process()` 方法
4. 在 `gui/control_panel.py` 中添加参数控件
5. 在 `gui/main_window.py` 中注册新算法

### 修改现有算法

1. 直接编辑对应的模块文件
2. 修改参数范围或添加新参数
3. 更新GUI控件（如需要）
4. 测试修改后的功能

### 自定义配置

1. 编辑 `utils/config.py` 中的默认配置
2. 程序会自动保存用户设置到 `config.json`
3. 支持配置的导入和导出

## ⚠️ 注意事项

1. 确保有足够的磁盘空间用于保存处理后的图像
2. 处理大尺寸图像时可能需要较长时间
3. 建议在处理前备份原始图像
4. 程序会自动创建 `output` 文件夹用于保存结果
5. 模块化设计使得代码更易维护，但需要理解模块间的关系

## 🐛 故障排除

### 常见问题

1. **无法加载图像**
   - 检查图像文件格式是否支持
   - 确认图像文件没有损坏
   - 检查文件路径是否正确

2. **依赖库安装失败**
   - 确保Python版本符合要求（3.7+）
   - 尝试使用 `pip install --upgrade pip` 更新pip
   - 检查网络连接

3. **界面显示异常**
   - 检查是否安装了所有依赖库
   - 尝试重新启动程序
   - 检查系统显示设置

4. **模块导入错误**
   - 确保所有模块文件都在正确位置
   - 检查Python路径设置
   - 重新安装依赖库

## 📄 许可证

本项目使用开源许可证，所有依赖库均为开源免费软件。

## 📈 更新日志

### v2.0.0 (模块化版本)
- 重构为模块化架构
- 增强算法功能，每种算法支持多种方法
- 改进GUI界面和用户体验
- 添加配置管理系统
- 提高代码可维护性和可扩展性

### v1.0.0
- 初始版本发布
- 实现五种图像增强算法
- 完成图形用户界面
- 支持图像保存功能

## 🤝 贡献指南

欢迎贡献代码和建议！请遵循以下步骤：

1. Fork 本项目
2. 创建功能分支
3. 提交更改
4. 发起 Pull Request

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 项目地址：[https://github.com/861013/A-simple-image-processing-tool]
- 邮箱：[1076359033@qq,com]

---

**享受图像处理的乐趣！** 🎨✨
